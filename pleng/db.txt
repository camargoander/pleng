create table usuario (
	idusu integer not null primary key AUTO_INCREMENT,
	nome varchar(200),
	email varchar(300) not null,
	senha varchar(100)
),

create table empreiteiro (
	idempreiteiro integer not null primary key AUTO_INCREMENT,
	nome varchar(200),
	telefone varchar(12)
),

create table projeto (
	idprojeto integer not null primary key AUTO_INCREMENT,
	idusu integer not null,
	idempreiteiro integer not null,
	cidade varchar(300),
	endereco varchar(700),
	descricao varchar(1000),
	data_criacao_obra date,
	qtde_dias integer,

	foreign key(idusu) references usuario(idusu),
	foreign key(idempreiteiro ) references usuario(idempreiteiro )
),

create table imagem_projeto (
	idimagem integer not null primary key AUTO_INCREMENT,
	idprojeto integer not null,
	imagem blob,
	data date,
	descricao varchar(600),

	foreign key(idprojeto) references projeto(idprojeto)
),

create table etapa (
	idetapa integer not null primary key AUTO_INCREMENT,
	nome varchar(300),
	duracao numeric(9,2)
),

create table material (
	idmaterial integer not null primary key AUTO_INCREMENT,
	nome varchar(300),
	fornecedor varchar(400),
	unidade varchar(5),
	preco numeric(9,2)
),

create table grupo_qtde (
	idgrupo integer not null primary key AUTO_INCREMENT,
	idetapa integer notn null,
	idmaterial integer not null,
	qtde_total_por etapa integer,

	foreign key(idetapa) references etapa(idetapa),
	foreign key(idmaterial) references material(idmaterial)
),

create table material_etapa (
	idmatetapa integer not null primary key AUTO_INCREMENT,
	idgrupo integer not null,

	foreign key(idgrupo) references grupo_qtde(idgrupo)
),

create table levantamento_inicial (
	idlevantamento integer not null primary key AUTO_INCREMENT,
	id_projeto integer not null,
	qtde_dias integer,

	foreign key(idprojeto) references projeto(idprojeto)
),

create_table diario_obra (
	iddiario integer not null primary key AUTO_INCREMENT,
	idlevantamento integer not null,
	data date,
	observacao varchar(600),
	seg_tempo char(1),
	ter_tempo char(1),
	qua_tempo char(1),
	qui_tempo char(1),
	sex_tempo char(1),

	foreign key(idlevantamento) references levantamento_inicial(idlevantamento)	
),

create table levantamento_etapa (
	idlevetapa integer not null primary key AUTO_INCREMENT,
	idlevantamento integer not null,
	idetapa integer not null,
	tamanho_total numeric(9,2),
	unidade varchar(5),
	descricao varchar(1000),
	situacao char(1),
	ordem integer,
	qtde_dias integer,
	
	foreign key(idetapa) references levantamento_inicial(idetapa),
	foreign key(idlevantamento) references levantamento_inicial(idlevantamento)
),

create table diario_etapa (
	iddiarioetapa integer not null primary key AUTO_INCREMENT,
	iddiario integer not null,
	idlevetapa integer not null,
	tamanho_feito integer,
	material_gasto integer,
	material_pedido,

	foreign key(iddiario) references diario_etapa(iddiario),
	foreign key(idlevetapa) references levantamento_etapa(idlevetapa)
),

create table material_lev_etapa (
	idmle integer not null primary key AUTO_INCREMENT,
	idlevetapa integer not null,
	idmatetapa integer not null,
	qtde_total integer,
	qtde_atual integer,
	
	foreign key(idlevetapa) references levantamento_etapa(idlevetapa),
	foreignkey(idmatetapa) references material_etapa(idmatetapa)
),

create table cronograma (
	idcronograma integer not null primary key AUTO_INCREMENT,	
	idlevetapa integer not null,
	data_ini date,
	data_fin data,
	sitaucao char(1),

	foreign key(idlevetapa) references levantamento_etapa(idlevetapa)
)